<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MARITIME SAFETY SERVICES UNIT NCR-CL</title>
<link rel="manifest" href="manifest.json" />
<link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- SPLASH -->
<div id="splash" class="center">
  <div class="splash-card">
    <h1>MARITIME SAFETY SERVICES UNIT NCR-CL</h1>
    <p class="lead">Saving Lives</p>
    <button id="enterBtn" class="btn primary">Enter</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="app" style="display:none;">
  <header class="app-header">
    <div>
      <h2>MSSU NCR-CL Portal</h2>
      <div class="muted">Admin â€¢ Logistics â€¢ Operation â€¢ Functional Branches â€¢ Others</div>
    </div>
    <div class="header-actions">
      <div id="gsiButton"></div>
      <button id="signoutBtn" class="btn small" style="display:none">Sign out</button>
      <button id="printBtn" class="btn small">ðŸ–¨ Print</button>
    </div>
  </header>

  <nav class="main-nav">
    <button class="nav-btn active" data-page="admin">Admin</button>
    <button class="nav-btn" data-page="logistics">Logistics</button>
    <button class="nav-btn" data-page="operation">Operation</button>
    <button class="nav-btn" data-page="functional">Functional Branches</button>
    <button class="nav-btn" data-page="others">Others</button>
  </nav>

  <main id="sections">
    <iframe id="pageFrame" src="admin.html" style="width:100%;height:calc(100vh - 220px);border:0"></iframe>
  </main>

  <footer class="app-footer">
    <div class="muted">Offline-capable â€¢ Data syncs to Google Drive/Sheets when online</div>
  </footer>
</div>

<script src="script.js"></script>

<!-- Google Identity Services -->
<script src="https://accounts.google.com/gsi/client" async defer></script>

<script>
/* Splash enter */
document.getElementById('enterBtn').onclick = () => {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('app').style.display = 'block';
};

/* Nav switching */
document.querySelectorAll('.nav-btn').forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const page = btn.dataset.page;
    document.getElementById('pageFrame').src = page + '.html';
  };
});

/* Print current iframe */
document.getElementById('printBtn').onclick = () => {
  const iframe = document.getElementById('pageFrame');
  iframe.contentWindow.focus();
  iframe.contentWindow.print();
};

/* Service worker registration (simple PWA offline) */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js').catch(console.error);
}
</script>
</body>
</html>
